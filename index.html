<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Editor de estilos eXeLearning (v3 y superiores)</title>
  <link rel="stylesheet" href="app/styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github.min.css" />
</head>
<body>
  <div id="trialNotice" class="trial-notice" role="status" aria-live="polite">
    <p><strong>Editor de estilos en fase de pruebas.</strong> Verifica siempre el resultado final en eXeLearning antes de publicarlo o compartirlo.</p>
    <button id="dismissTrialNotice" type="button" aria-label="Cerrar aviso">×</button>
  </div>
  <div id="appShell" class="app-shell">
    <aside id="editorPanel" class="editor-panel">
      <header class="panel-header">
        <h1>Editor de estilos eXeLearning (v3 y superiores)</h1>
        <p>Carga una plantilla oficial o un ZIP, edita y exporta.</p>
      </header>

      <nav class="tabs" aria-label="Secciones">
        <button class="tab active" data-tab="io" type="button">
          <span class="tab-icon material-symbols-outlined" aria-hidden="true">save</span>
          <span>Estilo</span>
        </button>
        <button class="tab" data-tab="quick" type="button">
          <span class="tab-icon material-symbols-outlined" aria-hidden="true">palette</span>
          <span>Ajustes</span>
        </button>
        <button class="tab" data-tab="files" type="button">
          <span class="tab-icon material-symbols-outlined" aria-hidden="true">description</span>
          <span>Archivos</span>
        </button>
      </nav>

      <section class="tab-panel active" data-panel="io">
        <div class="panel-block">
          <h3 class="section-title"><span class="section-icon material-symbols-outlined" aria-hidden="true">folder_open</span>Cargar plantilla</h3>
          <div class="section-content">
            <div class="load-group">
              <label class="file-label" for="elpxInput"><span class="inline-icon material-symbols-outlined" aria-hidden="true">library_books</span>Cargar proyecto ELPX</label>
              <div class="file-picker-row">
                <button id="elpxPickBtn" type="button"><span class="inline-icon material-symbols-outlined" aria-hidden="true">upload_file</span>Seleccionar ELPX</button>
                <span id="elpxInputName" class="file-picked-name">Ningún archivo seleccionado</span>
              </div>
              <input id="elpxInput" type="file" accept=".elpx,.zip,application/zip" class="sr-only" />
            </div>
            <div class="load-group">
              <label class="file-label"><span class="inline-icon material-symbols-outlined" aria-hidden="true">palette</span>Elegir estilo</label>
              <p class="status-inline">Puedes aplicar un estilo oficial o importar un ZIP personalizado.</p>
              <div class="style-choice-grid">
                <div class="style-choice-col">
                  <label class="file-label" for="officialStyleSelect">Estilo base oficial</label>
                  <select id="officialStyleSelect"></select>
                </div>
                <div class="style-choice-col">
                  <label class="file-label" for="zipInput">Importar estilo</label>
                  <div class="file-picker-row">
                    <button id="zipPickBtn" type="button"><span class="inline-icon material-symbols-outlined" aria-hidden="true">upload_file</span>Seleccionar ZIP</button>
                    <span id="zipInputName" class="file-picked-name">Ningún archivo seleccionado</span>
                  </div>
                </div>
              </div>
              <input id="zipInput" type="file" accept=".zip" class="sr-only" />
            </div>
            <article id="officialPreview" class="official-preview" aria-live="polite"></article>
          </div>
        </div>

        <div class="panel-block" id="metaDetails">
          <h3 class="section-title"><span class="section-icon material-symbols-outlined" aria-hidden="true">edit_note</span>Información y exportación</h3>
          <div class="section-content quick-grid info-grid">
            <label>Nombre <input id="metaName" type="text" /></label>
            <label>Título <input id="metaTitle" type="text" /></label>
            <label>Versión <input id="metaVersion" type="text" /></label>
            <label>Compatibilidad <input id="metaCompatibility" type="text" placeholder="3.0" /></label>
            <label>Autor <input id="metaAuthor" type="text" /></label>
            <label>Licencia <input id="metaLicense" type="text" placeholder="Creative Commons by-sa" /></label>
            <label>URL licencia <input id="metaLicenseUrl" type="url" placeholder="https://..." /></label>
            <label>Descargable
              <select id="metaDownloadable">
                <option value="1">Sí (1)</option>
                <option value="0">No (0)</option>
              </select>
            </label>
            <label class="full-width">Descripción
              <textarea id="metaDescription" rows="6"></textarea>
            </label>
            <div class="button-row">
              <button id="exportBtn" type="button"><span class="inline-icon material-symbols-outlined" aria-hidden="true">download</span>Exportar estilo</button>
              <button id="exportElpxBtn" type="button" hidden><span class="inline-icon material-symbols-outlined" aria-hidden="true">folder_zip</span>Guardar ELPX con el estilo modificado</button>
            </div>
            <p id="status" class="status"></p>
          </div>
        </div>
      </section>

      <section class="tab-panel" data-panel="quick">
        <details>
          <summary><span class="summary-icon material-symbols-outlined" aria-hidden="true">palette</span>Apariencia general</summary>
          <div class="section-content quick-grid">
            <div class="palette-compact">
              <label>Color enlaces <input id="linkColor" data-quick="linkColor" type="color" /></label>
              <label>Color título página <input id="titleColor" data-quick="titleColor" type="color" /></label>
              <label>Color texto base <input id="textColor" data-quick="textColor" type="color" /></label>
              <label>Fondo contenido <input id="contentBgColor" data-quick="contentBgColor" type="color" /></label>
              <label>Fondo global <input id="pageBgColor" data-quick="pageBgColor" type="color" /></label>
              <label id="contentOuterBgWrap">Espacio lateral
                <input id="contentOuterBgColor" data-quick="contentOuterBgColor" type="color" />
              </label>
            </div>
          </div>
        </details>

        <details>
          <summary><span class="summary-icon material-symbols-outlined" aria-hidden="true">width</span>Distribución y fondo general</summary>
          <div class="section-content quick-grid">
            <div class="group-card">
              <h4 class="group-title">Ancho de contenido</h4>
              <div class="inline-three">
                <label>Ancho contenido
                  <select id="contentWidthMode" data-quick="contentWidthMode">
                    <option value="default">Por defecto del estilo</option>
                    <option value="px">Ancho fijo (px)</option>
                    <option value="percent">Ancho relativo (%)</option>
                    <option value="mixed">Mixto (px y %)</option>
                  </select>
                </label>
                <label id="contentWidthPxWrap">Ancho (px)
                  <input id="contentWidth" data-quick="contentWidth" type="number" min="640" max="2000" step="10" />
                </label>
                <label id="contentWidthPercentWrap">Ancho (%)
                  <input id="contentWidthPercent" data-quick="contentWidthPercent" type="number" min="10" max="100" step="1" />
                </label>
              </div>
              <p id="contentWidthDefaultSummary" class="status-inline" hidden></p>
              <p id="contentWidthMixedHint" class="status-inline" hidden>Modo mixto: se aplica el menor valor entre px y % (`max-width: min(px, %)`)</p>
              <div id="contentCenterWrap" class="toggle-item">
                <span class="toggle-control">
                  <input id="contentCentered" data-quick="contentCentered" class="toggle-input" type="checkbox" checked />
                  <span class="toggle-visual"></span>
                </span>
                <label class="toggle-label" for="contentCentered">Centrar contenido</label>
              </div>
            </div>

            <div class="group-card">
              <h4 class="group-title">Imagen de fondo</h4>
              <div class="button-row">
                <button id="addBgImageBtn" type="button">Añadir fondo</button>
                <button id="removeBgImageBtn" type="button">Quitar fondo</button>
                <input id="addBgImageInput" type="file" accept=".png,.jpg,.jpeg,.gif,.webp,.svg,image/*" hidden />
              </div>
              <label>Imagen de fondo del estilo
                <select id="bgImageSelect">
                  <option value="">Seleccionar imagen del estilo…</option>
                </select>
              </label>
              <label>Repetición fondo
                <select id="bgImageRepeat" data-quick="bgImageRepeat">
                  <option value="no-repeat">No repetir</option>
                  <option value="repeat-x">Repetir horizontal</option>
                  <option value="repeat-y">Repetir vertical</option>
                  <option value="repeat">Repetir ambos</option>
                </select>
              </label>
              <label>Suavizado fondo (%)
                <input id="bgImageSoftness" data-quick="bgImageSoftness" type="number" min="0" max="90" step="1" />
              </label>
              <p id="bgImageInfo" class="status-inline">Sin imagen de fondo.</p>
            </div>
          </div>
        </details>

        <details>
          <summary><span class="summary-icon material-symbols-outlined" aria-hidden="true">text_fields</span>Tipografía general</summary>
          <div class="section-content quick-grid">
            <div class="inline-three">
              <label>Fuente general
                <select id="fontBody" data-quick="fontBody">
                  <option value="Georgia, 'Times New Roman', serif">Serif (Georgia)</option>
                  <option value="'Noto Sans', 'DejaVu Sans', sans-serif">Sans (Noto Sans)</option>
                  <option value="'Trebuchet MS', 'DejaVu Sans', sans-serif">Trebuchet</option>
                  <option value="'Verdana', 'DejaVu Sans', sans-serif">Verdana</option>
                </select>
              </label>
              <label>Fuente títulos
                <select id="fontTitles" data-quick="fontTitles">
                  <option value="Georgia, 'Times New Roman', serif">Serif (Georgia)</option>
                  <option value="'Noto Sans', 'DejaVu Sans', sans-serif">Sans (Noto Sans)</option>
                  <option value="'Trebuchet MS', 'DejaVu Sans', sans-serif">Trebuchet</option>
                  <option value="'Verdana', 'DejaVu Sans', sans-serif">Verdana</option>
                </select>
              </label>
              <label>Fuente menú
                <select id="fontMenu" data-quick="fontMenu">
                  <option value="Georgia, 'Times New Roman', serif">Serif (Georgia)</option>
                  <option value="'Noto Sans', 'DejaVu Sans', sans-serif">Sans (Noto Sans)</option>
                  <option value="'Trebuchet MS', 'DejaVu Sans', sans-serif">Trebuchet</option>
                  <option value="'Verdana', 'DejaVu Sans', sans-serif">Verdana</option>
                </select>
              </label>
            </div>
            <div class="button-row">
              <button id="addFontBtn" type="button">Añadir fuentes</button>
              <input id="addFontInput" type="file" accept=".woff,.woff2,.ttf,.otf,font/woff,font/woff2,font/ttf,font/otf" multiple hidden />
            </div>
            <div class="inline-two">
              <label>Tamaño base (px) <input id="baseFontSize" data-quick="baseFontSize" type="number" min="12" max="28" step="1" /></label>
              <label>Interlineado <input id="lineHeight" data-quick="lineHeight" type="number" min="1" max="2.2" step="0.05" /></label>
            </div>
          </div>
        </details>

        <details>
          <summary><span class="summary-icon material-symbols-outlined" aria-hidden="true">title</span>Títulos de página y proyecto</summary>
          <div class="section-content quick-grid">
            <div class="inline-three">
              <label>Tamaño título página (rem) <input id="pageTitleSize" data-quick="pageTitleSize" type="number" min="1.1" max="3.2" step="0.05" /></label>
              <label>Peso título página
                <select id="pageTitleWeight" data-quick="pageTitleWeight">
                  <option value="600">600</option>
                  <option value="700">700</option>
                  <option value="800">800</option>
                  <option value="900">900</option>
                </select>
              </label>
              <label>Espaciado letras título (px) <input id="pageTitleLetterSpacing" data-quick="pageTitleLetterSpacing" type="number" min="0" max="6" step="0.1" /></label>
            </div>
            <div class="inline-three">
              <label>Margen inferior título (rem) <input id="pageTitleMarginBottom" data-quick="pageTitleMarginBottom" type="number" min="0" max="2.5" step="0.05" /></label>
              <label>Tamaño título de proyecto (rem) <input id="packageTitleSize" data-quick="packageTitleSize" type="number" min="0" max="4" step="0.05" /></label>
              <label>Peso título de proyecto
                <select id="packageTitleWeight" data-quick="packageTitleWeight">
                  <option value="400">400</option>
                  <option value="500">500</option>
                  <option value="600">600</option>
                  <option value="700">700</option>
                </select>
              </label>
            </div>
            <div class="inline-three">
              <label>Color título de proyecto <input id="packageTitleColor" data-quick="packageTitleColor" type="color" /></label>
              <label>Tamaño título iDevice (rem) <input id="boxTitleSize" data-quick="boxTitleSize" type="number" min="1" max="2.4" step="0.05" /></label>
              <label>Separación icono/título (px) <input id="boxTitleGap" data-quick="boxTitleGap" type="number" min="0" max="28" step="1" /></label>
            </div>
            <div class="toggle-item">
              <span class="toggle-control">
                <input id="pageTitleUppercase" data-quick="pageTitleUppercase" class="toggle-input" type="checkbox" />
                <span class="toggle-visual"></span>
              </span>
              <label class="toggle-label" for="pageTitleUppercase">Título de página en mayúsculas</label>
            </div>
          </div>
        </details>

        <details>
          <summary><span class="summary-icon material-symbols-outlined" aria-hidden="true">account_balance</span>Logotipo institucional</summary>
          <div class="section-content quick-grid">
            <div class="button-row">
              <button id="addLogoBtn" type="button">Añadir/reemplazar logo</button>
              <button id="removeLogoBtn" type="button">Quitar logo</button>
              <input id="addLogoInput" type="file" accept=".png,.jpg,.jpeg,.gif,.webp,.svg,image/*" hidden />
            </div>
            <p id="logoInfo" class="status-inline">Sin logo cargado.</p>
            <div class="toggle-item">
              <span class="toggle-control">
                <input id="logoEnabled" data-quick="logoEnabled" class="toggle-input" type="checkbox" />
                <span class="toggle-visual"></span>
              </span>
              <label class="toggle-label" for="logoEnabled">Mostrar logo</label>
            </div>
            <div class="inline-three">
              <label>Tamaño logo (px) <input id="logoSize" data-quick="logoSize" type="number" min="40" max="500" step="1" /></label>
              <label>Posición
                <select id="logoPosition" data-quick="logoPosition">
                  <option value="top-left">Arriba izquierda</option>
                  <option value="top-center">Arriba centro</option>
                  <option value="top-right">Arriba derecha</option>
                  <option value="bottom-left">Abajo izquierda</option>
                  <option value="bottom-center">Abajo centro</option>
                  <option value="bottom-right">Abajo derecha</option>
                </select>
              </label>
              <label>Margen horizontal (px) <input id="logoMarginX" data-quick="logoMarginX" type="number" min="0" max="300" step="1" /></label>
            </div>
            <label>Margen vertical (px) <input id="logoMarginY" data-quick="logoMarginY" type="number" min="0" max="300" step="1" /></label>
          </div>
        </details>

        <details>
          <summary><span class="summary-icon material-symbols-outlined" aria-hidden="true">view_day</span>Cabecera y pie</summary>
          <div class="section-content quick-grid">
            <div class="inline-three">
              <div class="toggle-item">
                <span class="toggle-control">
                  <input id="headerImageEnabled" data-quick="headerImageEnabled" class="toggle-input" type="checkbox" />
                  <span class="toggle-visual"></span>
                </span>
                <label class="toggle-label" for="headerImageEnabled">Mostrar imagen de cabecera</label>
              </div>
              <div class="toggle-item">
                <span class="toggle-control">
                  <input id="headerHideTitle" data-quick="headerHideTitle" class="toggle-input" type="checkbox" />
                  <span class="toggle-visual"></span>
                </span>
                <label class="toggle-label" for="headerHideTitle">Ocultar título en cabecera</label>
              </div>
              <label>Alto cabecera (px) <input id="headerImageHeight" data-quick="headerImageHeight" type="number" min="48" max="420" step="1" /></label>
              <label>Ajuste cabecera
                <select id="headerImageFit" data-quick="headerImageFit">
                  <option value="contain">Contain (imagen completa)</option>
                  <option value="cover">Cover (rellenar cabecera)</option>
                  <option value="auto">Auto (tamaño original)</option>
                </select>
              </label>
            </div>
            <div class="inline-three">
              <label>Posición cabecera
                <select id="headerImagePosition" data-quick="headerImagePosition">
                  <option value="left top">Izquierda arriba</option>
                  <option value="center top">Centro arriba</option>
                  <option value="right top">Derecha arriba</option>
                  <option value="left center">Izquierda centro</option>
                  <option value="center center">Centro</option>
                  <option value="right center">Derecha centro</option>
                  <option value="left bottom">Izquierda abajo</option>
                  <option value="center bottom">Centro abajo</option>
                  <option value="right bottom">Derecha abajo</option>
                </select>
              </label>
              <label>Repetición cabecera
                <select id="headerImageRepeat" data-quick="headerImageRepeat">
                  <option value="no-repeat">No repetir</option>
                  <option value="repeat-x">Repetir horizontal</option>
                  <option value="repeat-y">Repetir vertical</option>
                  <option value="repeat">Repetir ambos</option>
                </select>
              </label>
            </div>
            <div class="toggle-item">
              <span class="toggle-control">
                <input id="showAllStyleImages" class="toggle-input" type="checkbox" />
                <span class="toggle-visual"></span>
              </span>
              <label class="toggle-label" for="showAllStyleImages">Mostrar todas las imágenes del estilo (incluye iconos)</label>
            </div>
            <label>Imagen de cabecera del estilo
              <select id="headerImageSelect">
                <option value="">Seleccionar imagen del estilo…</option>
              </select>
            </label>
            <div class="button-row">
              <button id="addHeaderImageBtn" type="button">Añadir/reemplazar cabecera</button>
              <button id="removeHeaderImageBtn" type="button">Quitar cabecera</button>
              <input id="addHeaderImageInput" type="file" accept=".png,.jpg,.jpeg,.gif,.webp,.svg,image/*" hidden />
            </div>
            <p id="headerImageInfo" class="status-inline">Sin imagen de cabecera.</p>
            <div class="inline-three">
              <div class="toggle-item">
                <span class="toggle-control">
                  <input id="footerImageEnabled" data-quick="footerImageEnabled" class="toggle-input" type="checkbox" />
                  <span class="toggle-visual"></span>
                </span>
                <label class="toggle-label" for="footerImageEnabled">Mostrar imagen de pie</label>
              </div>
              <label>Alto pie (px) <input id="footerImageHeight" data-quick="footerImageHeight" type="number" min="36" max="320" step="1" /></label>
              <label>Ajuste pie
                <select id="footerImageFit" data-quick="footerImageFit">
                  <option value="contain">Contain (imagen completa)</option>
                  <option value="cover">Cover (rellenar pie)</option>
                  <option value="auto">Auto (tamaño original)</option>
                </select>
              </label>
            </div>
            <div class="inline-three">
              <label>Posición pie
                <select id="footerImagePosition" data-quick="footerImagePosition">
                  <option value="left top">Izquierda arriba</option>
                  <option value="center top">Centro arriba</option>
                  <option value="right top">Derecha arriba</option>
                  <option value="left center">Izquierda centro</option>
                  <option value="center center">Centro</option>
                  <option value="right center">Derecha centro</option>
                  <option value="left bottom">Izquierda abajo</option>
                  <option value="center bottom">Centro abajo</option>
                  <option value="right bottom">Derecha abajo</option>
                </select>
              </label>
              <label>Repetición pie
                <select id="footerImageRepeat" data-quick="footerImageRepeat">
                  <option value="no-repeat">No repetir</option>
                  <option value="repeat-x">Repetir horizontal</option>
                  <option value="repeat-y">Repetir vertical</option>
                  <option value="repeat">Repetir ambos</option>
                </select>
              </label>
            </div>
            <label>Imagen de pie del estilo
              <select id="footerImageSelect">
                <option value="">Seleccionar imagen del estilo…</option>
              </select>
            </label>
            <div class="button-row">
              <button id="addFooterImageBtn" type="button">Añadir/reemplazar pie</button>
              <button id="removeFooterImageBtn" type="button">Quitar pie</button>
              <input id="addFooterImageInput" type="file" accept=".png,.jpg,.jpeg,.gif,.webp,.svg,image/*" hidden />
            </div>
            <p id="footerImageInfo" class="status-inline">Sin imagen de pie.</p>
            <p class="status-inline">Sugerencia: cabecera panorámica (p. ej. 1800x420) y pie (p. ej. 1800x220). Usa <strong>contain</strong> si no quieres recorte y <strong>cover</strong> si quieres ocupar toda la franja.</p>
          </div>
        </details>

        <details>
          <summary><span class="summary-icon material-symbols-outlined" aria-hidden="true">menu</span>Navegación (menú lateral)</summary>
          <div class="section-content quick-grid">
            <div class="palette-compact">
              <label>Fondo menú <input id="menuBgColor" data-quick="menuBgColor" type="color" /></label>
              <label>Texto menú <input id="menuTextColor" data-quick="menuTextColor" type="color" /></label>
              <label>Activo fondo <input id="menuActiveBgColor" data-quick="menuActiveBgColor" type="color" /></label>
              <label>Activo texto <input id="menuActiveTextColor" data-quick="menuActiveTextColor" type="color" /></label>
            </div>
            <div class="group-card">
              <h4 class="group-title">Iconos de navegación</h4>
              <div class="nav-icon-grid">
                <label>Icono Anterior
                  <select id="navPrevIconSelect">
                    <option value="">Seleccionar imagen del estilo…</option>
                  </select>
                </label>
                <div class="button-row">
                  <button id="addNavPrevIconBtn" type="button">Subir icono</button>
                  <input id="addNavPrevIconInput" type="file" accept=".png,.jpg,.jpeg,.gif,.webp,.svg,image/*" hidden />
                </div>
                <label>Icono Siguiente
                  <select id="navNextIconSelect">
                    <option value="">Seleccionar imagen del estilo…</option>
                  </select>
                </label>
                <div class="button-row">
                  <button id="addNavNextIconBtn" type="button">Subir icono</button>
                  <input id="addNavNextIconInput" type="file" accept=".png,.jpg,.jpeg,.gif,.webp,.svg,image/*" hidden />
                </div>
                <label>Icono Menú
                  <select id="navMenuIconSelect">
                    <option value="">Seleccionar imagen del estilo…</option>
                  </select>
                </label>
                <div class="button-row">
                  <button id="addNavMenuIconBtn" type="button">Subir icono</button>
                  <input id="addNavMenuIconInput" type="file" accept=".png,.jpg,.jpeg,.gif,.webp,.svg,image/*" hidden />
                </div>
              </div>
              <p id="navIconsInfo" class="status-inline">Sin cambios en iconos de navegación.</p>
            </div>
          </div>
        </details>

        <details>
          <summary><span class="summary-icon material-symbols-outlined" aria-hidden="true">smart_button</span>iDevices y botones (contenido)</summary>
          <div class="section-content quick-grid">
            <div class="palette-compact">
              <label>Fondo iDevice <input id="boxBgColor" data-quick="boxBgColor" type="color" /></label>
              <label>Borde iDevice <input id="boxBorderColor" data-quick="boxBorderColor" type="color" /></label>
              <label>Título iDevice <input id="boxTitleColor" data-quick="boxTitleColor" type="color" /></label>
              <label>Botón fondo <input id="buttonBgColor" data-quick="buttonBgColor" type="color" /></label>
              <label>Botón texto <input id="buttonTextColor" data-quick="buttonTextColor" type="color" /></label>
            </div>
            <div class="inline-two">
              <label>Alineación texto iDevice
                <select id="boxTextAlign" data-quick="boxTextAlign">
                  <option value="inherit">Por defecto del estilo</option>
                  <option value="left">Izquierda</option>
                  <option value="center">Centrado</option>
                  <option value="right">Derecha</option>
                  <option value="justify">Justificado</option>
                </select>
              </label>
              <label>Tamaño texto iDevice
                <select id="boxFontSize" data-quick="boxFontSize">
                  <option value="inherit">Por defecto del estilo</option>
                  <option value="14px">14 px</option>
                  <option value="16px">16 px</option>
                  <option value="18px">18 px</option>
                  <option value="20px">20 px</option>
                  <option value="22px">22 px</option>
                  <option value="24px">24 px</option>
                </select>
              </label>
            </div>
            <div class="button-row">
              <button id="addIdeviceIconsBtn" type="button">Añadir iconos iDevice</button>
              <input id="addIdeviceIconsInput" type="file" accept=".png,.jpg,.jpeg,.gif,.webp,.svg,image/*" multiple hidden />
            </div>
          </div>
        </details>
      </section>

      <section class="tab-panel" data-panel="files">
        <div class="section-content">
          <h3 class="section-title">Lista de archivos</h3>
          <label class="file-label" for="fileTypeFilter">Tipo de archivo</label>
          <select id="fileTypeFilter">
            <option value="all">Todos</option>
            <option value="images">Imágenes</option>
            <option value="css">CSS</option>
            <option value="js">JavaScript</option>
            <option value="xml">XML</option>
            <option value="json">JSON</option>
            <option value="html">HTML</option>
            <option value="markdown">Markdown</option>
            <option value="fonts">Fuentes</option>
            <option value="text">Texto</option>
            <option value="other">Otros</option>
          </select>
          <label class="file-label" for="fileNameFilter">Buscar archivo</label>
          <input id="fileNameFilter" type="search" placeholder="Buscar por nombre o ruta..." autocomplete="off" />
          <div id="fileList" class="file-list"></div>
        </div>

        <div class="section-content">
          <h3 class="section-title">Editor de archivo</h3>
          <p id="editorPath" class="editor-path">Selecciona un archivo de texto</p>
          <div id="imageActions" class="button-row image-actions">
            <button id="replaceImageBtn" type="button">Reemplazar imagen</button>
            <input id="replaceImageInput" type="file" accept=".png,.jpg,.jpeg,.gif,.webp,.svg,image/*" hidden />
          </div>
          <div id="editorSurface" class="editor-surface has-inline-action">
            <button id="openDetachedEditorBtn" class="editor-inline-action" type="button" aria-label="Abrir editor en ventana independiente">
              <span class="inline-icon material-symbols-outlined" aria-hidden="true">open_in_new</span>
            </button>
            <pre id="textHighlight" class="text-highlight" aria-hidden="true"></pre>
            <textarea id="textEditor" spellcheck="false" wrap="off"></textarea>
          </div>
          <div id="binaryPreview" class="binary-preview"></div>
        </div>
      </section>
    </aside>

    <main id="previewPanel" class="preview-panel">
      <header class="preview-header">
        <div class="preview-header-top">
          <h2>Previsualización real del ELPX</h2>
          <div class="preview-toolbar" aria-label="Acciones rápidas">
            <button id="undoBtn" class="icon-btn" type="button" title="Deshacer último cambio" disabled>
              <span class="material-symbols-outlined" aria-hidden="true">undo</span>
              <span class="sr-only">Deshacer último cambio</span>
            </button>
            <button id="redoBtn" class="icon-btn" type="button" title="Rehacer cambio deshecho" disabled>
              <span class="material-symbols-outlined" aria-hidden="true">redo</span>
              <span class="sr-only">Rehacer último cambio</span>
            </button>
            <button id="previewInspectBtn" class="icon-btn" type="button" aria-pressed="false" title="Modo edición por clic">
              <span class="material-symbols-outlined" aria-hidden="true">ads_click</span>
              <span class="sr-only">Activar modo edición por clic</span>
            </button>
          </div>
        </div>
      </header>
      <iframe id="previewFrame" title="Previsualización eXe" src="about:blank" sandbox="allow-same-origin allow-scripts"></iframe>
      <div id="busyOverlay" class="busy-overlay" hidden>
        <div class="busy-card" role="status" aria-live="polite" aria-busy="true">
          <span class="busy-spinner" aria-hidden="true"></span>
          <span id="busyOverlayText">Cargando…</span>
        </div>
      </div>
    </main>
  </div>
  <div id="clickEditModal" class="modal-backdrop" hidden>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="clickEditTitle">
      <h3 id="clickEditTitle">Editar elemento</h3>
      <p class="status-inline">Selector:</p>
      <p id="clickEditSelector" class="click-selector"></p>
      <div class="inline-two click-edit-grid">
        <label id="clickTextColorWrap">Color de texto
          <input id="clickPropColor" type="color" />
        </label>
        <label>Color de fondo
          <input id="clickPropBg" type="color" />
        </label>
      </div>
      <div class="inline-two click-edit-grid">
        <label id="clickTextAlphaWrap">Transparencia texto (%)
          <input id="clickPropColorAlpha" type="number" min="0" max="100" step="1" value="0" />
        </label>
        <label>Transparencia fondo (%)
          <input id="clickPropBgAlpha" type="number" min="0" max="100" step="1" value="0" />
        </label>
      </div>
      <div class="inline-two click-edit-grid">
        <label id="clickTextSizeWrap">Tamaño texto (solo px)
          <input id="clickPropFontSize" type="number" min="8" max="96" step="1" />
        </label>
        <label id="clickTextWeightWrap">Peso texto
          <select id="clickPropFontWeight">
            <option value="400">400 (normal)</option>
            <option value="500">500</option>
            <option value="600">600</option>
            <option value="700">700 (negrita)</option>
            <option value="800">800</option>
          </select>
        </label>
      </div>
      <div class="inline-two click-edit-grid">
        <label>Ancho (`width`, px y %)
          <input id="clickPropWidth" type="text" placeholder="Ej.: 320px o 80%" />
        </label>
        <label>Ancho máximo (`max-width`, px y %)
          <input id="clickPropMaxWidth" type="text" placeholder="Ej.: 1100px o 90%" />
        </label>
      </div>
      <div class="inline-two click-edit-grid">
        <label>Margen inferior (`margin-bottom`, px y %)
          <input id="clickPropMarginBottom" type="text" placeholder="Ej.: 16px o 2%" />
        </label>
        <label>Espaciado interno (`padding`, px y %)
          <input id="clickPropPadding" type="text" placeholder="Ej.: 12px, 2% o 8px 2%" />
        </label>
      </div>
      <div id="clickApplyInteractiveWrap" class="toggle-item click-edit-toggle" hidden>
        <span class="toggle-control">
          <input id="clickApplyInteractiveStates" class="toggle-input" type="checkbox" checked />
          <span class="toggle-visual"></span>
        </span>
        <label class="toggle-label" for="clickApplyInteractiveStates">Aplicar también al pasar el ratón o al hacer clic</label>
      </div>
      <div class="button-row click-edit-actions">
        <button id="clickEditApplyBtn" type="button">
          <span class="inline-icon material-symbols-outlined" aria-hidden="true">check</span>Aplicar cambios
        </button>
        <button id="clickEditCancelBtn" type="button">
          <span class="inline-icon material-symbols-outlined" aria-hidden="true">close</span>Cancelar
        </button>
      </div>
    </div>
  </div>
  <div id="exportRenameModal" class="modal-backdrop" hidden>
    <div class="modal-card modal-card-centered rename-modal-card" role="dialog" aria-modal="true" aria-labelledby="exportRenameTitle">
      <h3 id="exportRenameTitle">Guardar ELPX: cambiar nombre del estilo</h3>
      <p class="status-inline">Para que eXeLearning detecte este estilo como nuevo, cambia <strong>Nombre</strong> y <strong>Título</strong>.</p>
      <div class="inline-two click-edit-grid">
        <label>Nombre del estilo
          <input id="exportRenameNameInput" type="text" />
        </label>
        <label>Título visible
          <input id="exportRenameTitleInput" type="text" />
        </label>
      </div>
      <p id="exportRenameHelp" class="status-inline"></p>
      <div class="button-row click-edit-actions">
        <button id="exportRenameConfirmBtn" type="button">
          <span class="inline-icon material-symbols-outlined" aria-hidden="true">save</span>Guardar ELPX
        </button>
        <button id="exportRenameCancelBtn" type="button">
          <span class="inline-icon material-symbols-outlined" aria-hidden="true">close</span>Cancelar
        </button>
      </div>
    </div>
  </div>
  <footer class="app-footer">
    <p>v 1.0.0-beta.3 · © <a href="https://bilateria.org" target="_blank" rel="noopener noreferrer">Juan José de Haro</a> · <a href="https://www.gnu.org/licenses/agpl-3.0.html" target="_blank" rel="noopener noreferrer">Licencia AGPLv3</a> · <a href="https://github.com/jjdeharo/editor-estilos" target="_blank" rel="noopener noreferrer">Repositorio GitHub</a> · <a href="https://github.com/jjdeharo/editor-estilos/issues" target="_blank" rel="noopener noreferrer">Problemas y sugerencias</a></p>
  </footer>

  <script src="vendor/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script type="module" src="app/main.js"></script>
</body>
</html>
